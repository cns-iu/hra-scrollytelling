<!doctype html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>2: Identity Crisis</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="img/logo.svg">

    <link href="https://fonts.googleapis.com/css2?family=Cutive&display=swap" rel="stylesheet">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E1811WRJJD"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-E1811WRJJD');
    </script>
</head>

<body id="two">
    <!-- section counter -->
    <div id="sectionCounterdiv">
        <p id="sectionCounter"></p>
    </div>

    <!-- section top  -->
    <section class="top">
        <a href="index.html" class="topLogo">
            <img class="logo" src="img/logo.svg"> Human Atlas Stories
        </a>
        <div class="dropdown">
            <button class="dropbtn"><svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="#C2CAE5"
                    class="bi bi-list" viewBox="-1 -4 20 20">
                    <path fill-rule="evenodd"
                        d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                </svg>
                <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
                <a href="story0.html">0. Scrollytelling Elements and Effects!</a>
                <a href="story1.html">1. What Is An HRA?</a>
                <a href="story2.html">2. Get to Know Your Anatomical Structures!</a>
                <a href="story3.html">3. Learn about Visualizing Cells in the Human Body</a>
            </div>
        </div>
    </section>


    <!-- section header/intro -->
    <section class="intro" id="intro">
        <h3 class="overtext" id="introTypeLine"></h3>

        <div class="spritecontainer">
            <img class="frames" src="img/spritesheet.jpg">
            <img class="fadeinimg" src="img/3-kidney.png">
        </div>
    </section>

    <section class="section1">
        <div class="container">
        </div>
        <div class="container">
            This is the story of two of them.
        </div>
        <div class="container">
            Join CeCe and Squiggy as they experience. . .
        </div>
        <div class="container">
            Life on the Inside
        </div>
        <div class="container">
            ...
        </div>
        <div class="container">
            (of the body)
        </div>
        <div class="container introline">
            <p>On this week's episode:&nbsp;</p>
            <h1>Squiggy's Identity Crisis!</h1>
        </div>
        </div>
    </section>

    <section class="section2">
        <div class="limit" >
            <div class="scene1"></div>
            <div class="talkbubble">
                <div class="defaulttalk "><b>TV narrator:</b> In conclusion, the Human
                    Reference Atlas is a
                    comprehensive, high-resolution, three-dimensional atlas of all the cells in the healthy human body.
                </div>
            </div>

            <div class="talkbubble">
                <div class="defaulttalk "><b>TV narrator:</b> With the HRA, everyone will be able to find the names and
                    locations of all their favorite cells!
                </div>
            </div>
        </div>
        <div class="scene2" id="lastbg1"></div>

        <div class="talkbubble">
            <div class="squiggytalk "><b>Squiggy:</b> Hey, CeCe?
            </div>
        </div>
        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> What is it, Squiggy?
            </div>
        </div>
        <div class="talkbubble">
            <div class="squiggytalk "><b>Squiggy:</b> Have you ever wondered about the big questions? You know: Who
                am I? Where Do I Belong? What Is My Purpose?
            </div>
        </div>
        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> Sure, Squig. I think everybody does.
            </div>
        </div>
        <div class="talkbubble">
            <div class="squiggytalk "><b>Squiggy:</b> But I have so many questions, and I don't know any of the
                answers. This identity crisis has me all bent out of shape!
            </div>
        </div>
        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> Whoa, Squiq! Don't burst your membrane!
            </div>
        </div>
        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> If you'd been paying attention, you would know that we can use the
                Human Reference Atlas to figure out what you are and where you belong!
            </div>
        </div>
        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> And I think I know just the perfect place to start!
            </div>
        </div>

        <div class="scene3"></div>

        <div class="talkbubble">
            <div class="squiggytalk "><b>Squiggy:</b> Ahh! Who just turned out all the lights?
            </div>
        </div>
        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> Don't worry Squiggy, it's just a scene transition.
            </div>
        </div>
        <div class="talkbubble">
            <div class="squiggytalk "><b>Squiggy:</b> Oh, well, I am NOT a fan.
            </div>
        </div>

        <div class="scene4"></div>

        <div class="talkbubble">
            <div class="squiggytalk "><b>Squiggy:</b> Where are we now?
            </div>
        </div>
        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> We're standing on top of the Human Reference Atlas's ASCT+B Reporter!
            </div>
        </div>
        <div class="talkbubble">
            <div class="squiggytalk "><b>Squiggy:</b> What does it do?
            </div>
        </div>
        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> Well, it can help us solve your identity crisis!
            </div>
        </div>

        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> You see, the ASCT+B Reporter allows researchers to explore anatomical
                structures, cell types, and biomarkers that make up different organs.
            </div>
        </div>

        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> The data tables from which the Reporter gets its information are
                authored
                and reviewed by experts in their field.
            </div>
        </div>

        <div class="scene5" id="lastbg"></div>

        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> We start on the left with the organs that everybody knows: organs like
                the large intestines, the kidney, the heart.
            </div>
        </div>
        <div class="talkbubble">
            <div class="squiggytalk "><b>Squiggy:</b> Yeah, those sound familiar.
            </div>
        </div>

        <div class="talkbubble">
            <div class="cecetalk "><b>CeCe:</b> Let's check out my favorite organ: the lungs!
            </div>
        </div>

        <div class="scene6" id="lastbg"></div>

        <!-- Video -->
        <div class="section3">
            <iframe width="100%"  height="315"
                src="https://www.youtube.com/embed/pzUFmDhQEO8" title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
        </div>

        <!-- Link section-->
        <div class="acknowledgements">
            External links
        </div>

        <!-- HRA Ack -->
        <div class="acknowledgements">
            HRA Acknowledgements
        </div>

        <!-- BotNav -->
        <div class="botNav">
            <a href="story1.html" class="previous"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="currentColor" class="bi bi-arrow-left" viewBox="0 -3 16 16">
                    <path fill-rule="evenodd"
                        d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z" />
                </svg> Story 1: <span class="prevTitle">What Is An HRA?</span></a>
            <a href="story3.html" class="next">Story 3: <span class="nextTitle">Learn about Visualizing Cells in the
                    Human
                    Body</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-arrow-right" viewBox="0 -3 16 16">
                    <path fill-rule="evenodd"
                        d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z" />
                </svg></a>
        </div>

        <footer>
            &commat; 2023 Human Atlas Design System at Indiana University
        </footer>
        </div>
    </section>


</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/ScrollTrigger.min.js"></script>

<script src="scripts.js"></script>

<script>

    //typewriter
    var m = 0;
    var txt = 'There are roughly 37 trillion cells in the human body.';
    var speed = 50;

    function typeWriter() {
        if (m < txt.length) {
            document.getElementById("introTypeLine").innerHTML += txt.charAt(m);
            m++;
            setTimeout(typeWriter, speed);
        }
    }
    window.onload = typeWriter;

    //play sound
    ScrollTrigger.create({
        trigger: ".introline",
        start: "top top",
        end: "bottom bottom",
        invalidateOnRefresh: true,
        onEnter: playsound,
        pin: false,
        pinSpacing: false,
        once: true
    });

    function playsound() {
        var audio = new Audio('music/dramatic.swf.mp3');
        audio.play();
        audio.volume = 0.5;
    }

    //bg1
    ScrollTrigger.create({
        trigger: ".scene1",
        start: "top top",
        end: "+=300%",
        anticipatePin: 1,
        invalidateOnRefresh: true,
        pin: true,
        pinSpacing: false
    });

    //bg2
    ScrollTrigger.create({
        trigger: ".scene2",
        anticipatePin: 1,
        start: "top top",
        end: "+=900%",
        invalidateOnRefresh: true,
        pin: true,
        pinSpacing: false
    });

    //bg3
    ScrollTrigger.create({
        trigger: ".scene3",
        start: "top top",
        end: "+=400%",
        invalidateOnRefresh: true,
        pin: true,
        pinSpacing: false
    });

    //bg4
    ScrollTrigger.create({
        trigger: ".scene4",
        start: "top top",
        end: "+=700%",
        invalidateOnRefresh: true,
        pin: true,
        pinSpacing: false
    });

    //bg6
    ScrollTrigger.create({
        trigger: ".scene5",
        start: "top top",
        end: "+=400%",
        invalidateOnRefresh: true,
        pin: true,
        scrub: 1,
        pinSpacing: false,
    });

const newtime = gsap.timeline({
  scrollTrigger: {
        trigger: '.scene6',
        start: 'top top',
        end: '-=100%',
        scrub: true
  }
})

newtime
.to('#lastbg', {
      opacity: 1,
    })
.to('#lastbg', {
      opacity: 0,
    }, "<")





/* 
    function onleavefunc() {
        console.log("leave");
        console.log(document.getElementById('lastbg').style.backgroundImage);
        if (document.getElementById('lastbg').style.backgroundImage != "none") {
            document.getElementById('lastbg').style.backgroundImage = "none"; // specify the image path here
        }
    }

    function onenterfunc() {
        console.log("enter");
        if(document.getElementById('lastbg').style.backgroundImage != "url('img/2scene3.png')"){
            document.getElementById('lastbg').style.backgroundImage = "url('img/2scene3.png')";
        }
    } */


    //fade in txt 
    const containers = gsap.utils.toArray(".container");
    containers.forEach((container) => {
        let tl = gsap.timeline({
            scrollTrigger: {
                onRefresh: self => self.progress && self.animation.progress(1),
                start: "top top",
                trigger: container,
                pin: true,
                pinSpacing: false,
                scrub: true,
                markers: false
            }
        });

        tl.to(container, {
            autoAlpha: 1
        }).to(
            container,
            {
                autoAlpha: 0
            },
            0.5
        );
    });

    //fade in txt 
    const overlays = gsap.utils.toArray(".overlaybubbles");
    overlays.forEach((obubble) => {
        let tl = gsap.timeline({
            scrollTrigger: {
                trigger: obubble,
                pin: true,
                pinSpacing: false,
                scrub: true,
                markers: false
            }
        });

        tl.to(obubble, {
            autoAlpha: 1
        }).to(
            obubble,
            {
                autoAlpha: 0
            },
            0.5
        );
    });

    //fade in txt 
    const bubbles = gsap.utils.toArray(".talkbubble");
    bubbles.forEach((bubble) => {
        let tl = gsap.timeline({
            scrollTrigger: {
                trigger: bubble,
                start: "top top",
                scrub: 0.5,
                pin: true,
                invalidateOnRefresh: true,
                pinSpacing: false,
                scrub: true,
                markers: false
            }
        });

        tl.to(bubble, {
            autoAlpha: 1
        }).to(
            bubble,
            {
                autoAlpha: 0
            },
            0.5
        );
    });

    //spritesheet animation
    var spriteSheet = {
        width: 900,
        height: 1200,
        total: 20,
        cols: 1,
        rows: 20,
        duration: 1,
    };

    var tl = gsap.timeline({
        scrollTrigger: {
            scrub: 0.25,
            pin: ".spritecontainer",
            invalidateOnRefresh: true,
        }
    });

    tl.from(".spritecontainer", {
        duration: 0.25,
        invalidateOnRefresh: true
    }, 0)
        .to(".spritecontainer", {
            duration: 0.25,
            invalidateOnRefresh: true
        }, 0.75)
        .to(".fadeinimg", {
            opacity: 1,
            duration: 0.25,
            invalidateOnRefresh: true
        }, 0.75)

    for (var i = 0; i < spriteSheet.total; i++) {
        tl.set(".frames", {
            x: (i % spriteSheet.cols) * -spriteSheet.width,
            y: Math.floor(i / spriteSheet.cols) * -spriteSheet.height
        }, i / (spriteSheet.total - 1) * spriteSheet.duration);
    }

    window.onbeforeunload = function () {
        window.scrollTo(0, 0);
    }

    window.history.scrollRestoration = "manual";

</script>

</html>